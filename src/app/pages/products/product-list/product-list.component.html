<div class="container my-4">

  <!-- Encabezado destacado -->
  <div
    class="bg-light border-bottom rounded-3 px-4 py-3 mb-4 d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center shadow-sm">
    <div>
      <h2 class="mb-1 fw-semibold">
        <i class="bi bi-gear-fill text-primary me-2"></i> Gestión de Inventario
      </h2>
      <div class="text-muted fs-6">
        Administra el stock, precios y categorías de tus productos.
      </div>
    </div>
    <button class="btn btn-primary shadow-sm mt-3 mt-md-0 d-flex align-items-center gap-2" (click)="onAddProduct()">
      <i class="bi bi-plus-lg fs-5"></i>
      <span>Agregar producto</span>
    </button>
  </div>

  <!-- Tarjetas de Resumen -->
  <div class="row g-3 mb-4">
    <div class="col-12 col-md-4">
      <div class="card shadow-sm border-0 h-100">
        <div class="card-body d-flex align-items-center">
          <div class="bg-primary bg-opacity-10 rounded-circle p-3 me-3">
            <i class="bi bi-box-seam text-primary fs-3"></i>
          </div>
          <div>
            <div class="text-muted small">Total Productos</div>
            <div class="fs-4 fw-bold">{{ totalProducts }}</div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="card shadow-sm border-0 h-100">
        <div class="card-body d-flex align-items-center">
          <div class="bg-danger bg-opacity-10 rounded-circle p-3 me-3">
            <i class="bi bi-exclamation-triangle text-danger fs-3"></i>
          </div>
          <div>
            <div class="text-muted small">Stock Crítico</div>
            <div class="fs-4 fw-bold">{{ lowStockCount }}</div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="card shadow-sm border-0 h-100">
        <div class="card-body d-flex align-items-center">
          <div class="bg-info bg-opacity-10 rounded-circle p-3 me-3">
            <i class="bi bi-tags text-info fs-3"></i>
          </div>
          <div>
            <div class="text-muted small">Categorías</div>
            <div class="fs-4 fw-bold">{{ categoryCount }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Card principal con búsqueda y tabla -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-header bg-white border-bottom-0 pb-2">
      <app-product-search (search)="onSearch($event)"></app-product-search>
    </div>
    <div class="card-body p-0">
      <app-product-table [products]="products" [loading]="loading" (editStock)="openStockModal($event)"
        (select)="onSelectProduct($event)" (edit)="onEditProduct($event)">
      </app-product-table>
    </div>
  </div>

  <app-stock-adjustment [show]="showStockModal" [product]="selectedProduct" (closed)="showStockModal = false"
    (saved)="onStockSaved()">
  </app-stock-adjustment>

  <!-- Paginación Bootstrap moderna -->
  <!-- Paginación Bootstrap -->
  <nav *ngIf="totalPages > 1" class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="page === 0">
        <button class="page-link" (click)="goToPage(page - 1)">
          <i class="bi bi-chevron-left"></i>
        </button>
      </li>
      <li class="page-item" *ngFor="let p of [].constructor(totalPages); let i = index" [class.active]="i === page">
        <button class="page-link" (click)="goToPage(i)">{{ i + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="page === totalPages - 1">
        <button class="page-link" (click)="goToPage(page + 1)">
          <i class="bi bi-chevron-right"></i>
        </button>
      </li>
    </ul>
  </nav>
</div>