<div class="container my-4">
  <h2 class="mb-3">
    <i class="bi bi-cart-plus text-primary"></i> Nueva Venta
  </h2>

  <app-product-search (select)="onProductSelected($event)"></app-product-search>

  <app-cart-table
    [items]="cartItems"
    (increase)="onIncrease($event)"
    (decrease)="onDecrease($event)"
    (remove)="onRemove($event)"
    (quantityChange)="onQuantityChange($event)">
  </app-cart-table>

  <div class="row mt-3">
    <div class="col-md-6">
      <label class="form-label">Método de pago</label>
      <select class="form-select" [(ngModel)]="paymentType">
        <option value="CASH">Efectivo</option>
        <option value="CREDIT_CARD">Tarjeta de crédito</option>
        <option value="DEBIT_CARD">Tarjeta de débito</option>
        <option value="MERCADO_PAGO">Mercado Pago</option>
      </select>
    </div>
    <div class="col-md-6 text-end">
      <div class="fw-bold fs-5 mb-2">Total: ${{ total }}</div>
      <button class="btn btn-success" [disabled]="cartItems.length === 0 || loading" (click)="finalizarVenta()">
        Finalizar venta
      </button>
    </div>
  </div>

  <div *ngIf="successMsg" class="alert alert-success mt-3">{{ successMsg }}</div>
  <div *ngIf="errorMsg" class="alert alert-danger mt-3">{{ errorMsg }}</div>
</div>